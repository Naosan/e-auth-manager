# e-auth-multi-token-manager - Environment Configuration Example
# Copy this file to .env (in your app project root). The library loads .env from the current working directory first, then falls back to the package root.
# Alternatively, set EAUTH_CONFIG to a JSON config file (see README) and keep .env minimal.

# API Credentials (REQUIRED)
# Preferred names (provider-agnostic)
EAUTH_CLIENT_ID=your_client_id
EAUTH_CLIENT_SECRET=your_client_secret
# Explicit eBay prefix aliases (if you want to be clear it's for eBay keys)
# EAUTH_EBAY_CLIENT_ID=your_ebay_client_id
# EAUTH_EBAY_CLIENT_SECRET=your_ebay_client_secret
# Backward-compatible aliases
# EBAY_CLIENT_ID=your_ebay_client_id
# EBAY_CLIENT_SECRET=your_ebay_client_secret
# EBAY_API_APP_NAME=your_legacy_app_name
# EBAY_API_CERT_NAME=your_legacy_cert_name

# eBay API Environment
EAUTH_ENVIRONMENT=PRODUCTION
# EAUTH_ENVIRONMENT=SANDBOX
# EBAY_ENVIRONMENT=PRODUCTION
# EBAY_ENVIRONMENT=SANDBOX

# Optional JSON config file (can include clientId/secret, masterKey, paths, etc.)
EAUTH_CONFIG=

# Security Configuration (optional)
# By default the library uses the machine hostname as the encryption key.
# Leave this unset to derive a per-machine key from the current hostname.
# Set it only when you need to share encrypted tokens across hosts or rotate keys manually.
# Required when using OAUTH_SSOT_JSON so every instance can decrypt the shared file.
# Generate a secure key: openssl rand -hex 32
# If you change this value later, all stored tokens are wiped automatically.
# For manual cleanup or incident response, run: node examples/reset-encryption.js
EAUTH_MASTER_KEY=your_secure_master_key_change_me_in_production
# EBAY_OAUTH_TOKEN_MANAGER_MASTER_KEY=your_secure_master_key_change_me_in_production

# Initial Refresh Token for First-Time Setup (IMPORTANT)
# This token MUST be obtained manually through eBay's browser-based OAuth flow
# It cannot be generated via API
# 
# When this environment variable is set:
# 1. The token will be automatically initialized on first startup
# 2. It will be encrypted and saved to:
#    - SQLite database: ./database/ebay_tokens.sqlite
#    - Encrypted JSON file (platform-specific):
#      Windows: %LOCALAPPDATA%\ebay-oauth-tokens\ebay-tokens.encrypted.json
#      macOS: ~/Library/Application Support/ebay-oauth-tokens/
#      Linux: ~/.local/share/ebay-oauth-tokens/
# 3. The library will automatically use this token to obtain access tokens
#
# Note: This is a one-time setup. Once saved, the token persists and this
# environment variable is no longer needed
# It seeds only the "default" account with EBAY_DEFAULT_APP_ID.
# To register or update additional accounts/App IDs, run the bulk helper:
#   node examples/bulk-refresh-token-seed.js
# (Configure the helper via EBAY_REFRESH_TOKEN_SEED_JSON or
# EBAY_REFRESH_TOKEN_SEED_FILE as shown below.)
EAUTH_INITIAL_REFRESH_TOKEN=your_manual_refresh_token_from_browser_oauth
# EBAY_INITIAL_REFRESH_TOKEN=your_manual_refresh_token_from_browser_oauth

# Bulk Refresh Token Seeding (OPTIONAL)
# Provide refresh tokens for multiple accounts/app IDs and run the helper above
# Set only one of the following variables at a time
# Inline JSON example (remember to escape quotes if defined in a .env file):
# EBAY_REFRESH_TOKEN_SEED_JSON=[{"accountName":"sellerA","appId":"YourAppIDA","refreshToken":"v=1.abcdef"}]
EBAY_REFRESH_TOKEN_SEED_JSON=
# JSON file example (relative paths resolve from the project root):
EBAY_REFRESH_TOKEN_SEED_FILE=

# Centralized JSON (SSOT) Configuration
# Path to centralized JSON file for shared refresh token storage
EAUTH_SSOT_JSON=/var/secure/ebay/refresh-ssot.json
OAUTH_SSOT_JSON=/var/secure/ebay/refresh-ssot.json
# Namespace for token organization (optional)
EAUTH_TOKEN_NAMESPACE=ebay-oauth
TOKEN_NAMESPACE=ebay-oauth

# Database Configuration
# Default: ./database/ebay_tokens.sqlite
EAUTH_DATABASE_PATH=./database/ebay_tokens.sqlite
# EBAY_DATABASE_PATH=./database/ebay_tokens.sqlite

# File Storage Configuration
# For custom token file location (leave empty to use OS-specific default location)
EAUTH_TOKEN_FILE_PATH=
# EBAY_TOKEN_FILE_PATH=

# Advanced Configuration (rarely needs to be changed)
EAUTH_TOKEN_URL=https://api.ebay.com/identity/v1/oauth2/token
EAUTH_SCOPE=https://api.ebay.com/oauth/api_scope
# EBAY_TOKEN_URL=https://api.ebay.com/identity/v1/oauth2/token
# EBAY_SCOPE=https://api.ebay.com/oauth/api_scope
